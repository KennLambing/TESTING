{"version":3,"sources":["js/jq.schedule.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","$","$element","element","setting","_scheduleData","_timelineData","currentNode","tableStartTime","tableEndTime","methods","calcStringTime","str","slice","split","Number","formatTime","val","i1","Math","floor","scheduleData","timelineData","i","data","schedule","d","timeline","push","resetData","find","remove","_resizeRow","apply","this","addSchedule","start","end","text","_addScheduleData","_resetBarPosition","addRow","_addRow","resetRowData","height","setRows","setDraggable","enable","draggable","setResizable","resizable","_getTimeLineNumber","top","num","n","tn","ceil","timeLineY","timeLinePaddingTop","timeLinePaddingBottom","rows","r","tr","length","max","_addScheduleBgData","st","widthTime","et","$bar","css","left","widthTimeX","width","eq","class","addClass","append","stext","etext","snum","_getScheduleCount","onAppendSchedule","key","bind","onClick","node","scKey","$node","grid","containment","helper","event","ui","offsetTop","position","offsetLeft","currentTop","currentLeft","nowTimeline","drag","$moveNode","timelineNum","_rewriteBarText","stop","x","onChange","handles","minWidth","resize","ev","size","w","outerWidth","row","html","id","$data","title","subtitle","onInitRow","$timeline","t","$tl","click","onScheduleClick","on","bdata","s","e","droppable","accept","drop","nowTimelineNum","index","appendTo","onAppendRow","each","$e1","$e2","c1","c2","s1","s2","e1","$barList","codes","check","h","code","sort","a","b","next","j","outerHeight","timeLineBorder","closest","_resizeWindow","scMainWidth","dataWidth","verticalScrollbar","cellNum","_moveSchedules","baseTimeLineCell","moveWidth","v1","v2","min","init","options","extend","className","startTime","endTime","timeBorder","headTimeBorder","bundleMoveWidth","scroll","scrollTop","scrollLeft","beforeTime","$time","cn","window","trigger","fn","timeSchedule","method","Array","call","arguments","error","jQuery"],"mappings":"AAAA,aAEA,SAASA,QAAQC,GAAmV,OAAtOD,QAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAyBA,IAEnX,SAAWK,GAGT,IAMIC,EAAUC,EANVC,EAAU,KACVC,EAAgB,GAChBC,EAAgB,GAChBC,EAAc,KACdC,EAAiB,EACjBC,EAAe,EAEfC,EAAU,CAMZC,eAAgB,SAAwBC,GACtC,IAAIC,EAAQD,EAAIE,MAAM,KAGtB,OAF2B,GAAnBC,OAAOF,EAAM,IAAW,GACL,GAAnBE,OAAOF,EAAM,KASvBG,WAAY,SAAoBC,GAC9B,IAAIC,EAAKD,EAAM,KAGf,MAFQ,GAAKE,KAAKC,MAAMH,EAAM,MAASE,KAAKC,MAAMH,EAAM,KAAO,IAEpD,KADH,GAAKE,KAAKC,MAAMF,EAAK,KAAOC,KAAKC,MAAMF,EAAK,GAAK,MAQ3DG,aAAc,WACZ,OAAOhB,GAOTiB,aAAc,WACZ,IACIC,EADAC,EAAO,GAGX,IAAKD,KAAKjB,EACRkB,EAAKD,GAAKjB,EAAciB,GACxBC,EAAKD,GAAGE,SAAW,GAGrB,IAAKF,KAAKlB,EAAe,CACvB,IAAIqB,EAAIrB,EAAckB,QAEI,IAAfG,EAAEC,eAImB,IAArBH,EAAKE,EAAEC,WAIlBH,EAAKE,EAAEC,UAAUF,SAASG,KAAKF,GAGjC,OAAOF,GAMTK,UAAW,WAIT,IAAK,IAAIN,KAHTlB,EAAgB,GAChBH,EAAS4B,KAAK,WAAWC,SAEXzB,EACZA,EAAciB,GAAGE,SAAW,GAE5Bf,EAAQsB,WAAWC,MAAMC,KAAM,CAACX,EAAG,IAGrC,OAAOW,MAUTC,YAAa,SAAqBR,EAAUH,GAC1C,IAAIE,EAAI,CACNU,MAAO1B,EAAQC,eAAea,EAAKY,OACnCC,IAAK3B,EAAQC,eAAea,EAAKa,KACjCC,KAAMd,EAAKc,KACXX,SAAUA,GAWZ,OARIH,EAAKA,OACPE,EAAEF,KAAOA,EAAKA,MAGhBd,EAAQ6B,iBAAiBN,MAAMC,KAAM,CAACP,EAAUD,IAEhDhB,EAAQ8B,kBAAkBP,MAAMC,KAAM,CAACP,IAEhCO,MAUTO,OAAQ,SAAgBd,EAAUH,GAGhC,OAFAd,EAAQgC,QAAQT,MAAMC,KAAM,CAACP,EAAUH,IAEhCU,MAQTS,aAAc,WAMZ,OALAtC,EAAgB,GAChBC,EAAgB,GAChBJ,EAAS4B,KAAK,WAAWC,SACzB7B,EAAS4B,KAAK,aAAaC,SAC3B7B,EAAS4B,KAAK,YAAYc,OAAO,GAC1BV,MASTW,QAAS,SAAiBrB,GAGxB,IAAK,IAAIG,KAFTjB,EAAQiC,aAAaV,MAAMC,KAAM,IAEZV,EACnBd,EAAQ+B,OAAOR,MAAMC,KAAM,CAACP,EAAUH,EAAKG,KAG7C,OAAOO,MAOTY,aAAc,SAAsBC,GAC9BA,IAAW3C,EAAQ4C,aACrB5C,EAAQ4C,UAAYD,GAGlB7C,EAAS4B,KAAK,WAAWkB,UAAU,UAEnC9C,EAAS4B,KAAK,WAAWkB,UAAU,aASzCC,aAAc,SAAsBF,GAC9BA,IAAW3C,EAAQ8C,aACrB9C,EAAQ8C,UAAYH,GAGlB7C,EAAS4B,KAAK,WAAWoB,UAAU,UAEnChD,EAAS4B,KAAK,WAAWoB,UAAU,aAWzCC,mBAAoB,SAA4BC,GAC9C,IAAIC,EAAM,EACNC,EAAI,EACJC,EAAKpC,KAAKqC,KAAKJ,GAAOhD,EAAQqD,UAAYrD,EAAQsD,mBAAqBtD,EAAQuD,wBAEnF,IAAK,IAAIpC,KAAKnB,EAAQwD,KAAM,CAC1B,IAAIC,EAAIzD,EAAQwD,KAAKrC,GACjBuC,EAAK,EAYT,GAV4B,WAAxBnE,QAAQkE,EAAEpC,YACZqC,EAAKD,EAAEpC,SAASsC,QAGdxD,GAAeA,EAAYoB,UAC7BmC,IAKOP,IAFTD,GAAKnC,KAAK6C,IAAIF,EAAI,IAGhB,MAGFT,IAGF,OAAOA,GAQTY,mBAAoB,SAA4BzC,GAC9C,IAAI0C,EAAK/C,KAAKqC,MAAMhC,EAAKY,MAAQ5B,GAAkBJ,EAAQ+D,WACvDC,EAAKjD,KAAKC,OAAOI,EAAKa,IAAM7B,GAAkBJ,EAAQ+D,WACtDE,EAAOpE,EAAE,0DAIboE,EAAKC,IAAI,CACPC,KAAML,EAAK9D,EAAQoE,WACnBpB,IAAK,EACLqB,OAAQL,EAAKF,GAAM9D,EAAQoE,WAC3B5B,OAAQ1C,EAAS4B,KAAK,sBAAsB4C,GAAGlD,EAAKG,UAAUiB,WAG5DpB,EAAKc,MACP+B,EAAKvC,KAAK,SAASQ,KAAKd,EAAKc,MAG3Bd,EAAKmD,OACPN,EAAKO,SAASpD,EAAKmD,OAIrBzE,EAAS4B,KAAK,sBAAsB4C,GAAGlD,EAAKG,UAAUkD,OAAOR,IAU/D9B,iBAAkB,SAA0BZ,EAAUH,GACpD,IAAI0C,EAAK/C,KAAKqC,MAAMhC,EAAKY,MAAQ5B,GAAkBJ,EAAQ+D,WACvDC,EAAKjD,KAAKC,OAAOI,EAAKa,IAAM7B,GAAkBJ,EAAQ+D,WACtDE,EAAOpE,EAAE,4GACT6E,EAAQpE,EAAQM,WAAWQ,EAAKY,OAChC2C,EAAQrE,EAAQM,WAAWQ,EAAKa,KAEhC2C,EAAOtE,EAAQuE,kBAAkBhD,MAAM9B,EAAS,CAACqB,EAAKG,WAE1D0C,EAAKC,IAAI,CACPC,KAAML,EAAK9D,EAAQoE,WACnBpB,IAAK4B,EAAO5E,EAAQqD,UAAYrD,EAAQsD,mBACxCe,OAAQL,EAAKF,GAAM9D,EAAQoE,WAC3B5B,OAAQxC,EAAQqD,YAElBY,EAAKvC,KAAK,SAASQ,KAAKwC,EAAQ,IAAMC,GAElCvD,EAAKc,MACP+B,EAAKvC,KAAK,SAASQ,KAAKd,EAAKc,MAG3Bd,EAAKmD,OACPN,EAAKO,SAASpD,EAAKmD,OAIVzE,EAAS4B,KAAK,sBAAsB4C,GAAG/C,GAC7CkD,OAAOR,GAEZhE,EAAcuB,KAAKJ,GAGfpB,EAAQ8E,kBACV9E,EAAQ8E,iBAAiBb,EAAM7C,GAIjC,IAAI2D,EAAM9E,EAAc0D,OAAS,EACjCM,EAAK7C,KAAK,SAAU2D,GACpBd,EAAKe,KAAK,UAAW,WAEnB,GAAIhF,EAAQiF,UACwB,IAA9BpF,EAAEiC,MAAMV,KAAK,eAAyD,IAAhCvB,EAAEiC,MAAMV,KAAK,eAAyB,CAC9E,IAAI8D,EAAOrF,EAAEiC,MACTqD,EAAQD,EAAK9D,KAAK,UACtBpB,EAAQiF,QAAQC,EAAMjF,EAAckF,OAI1C,IAAIC,EAAQtF,EAAS4B,KAAK,WA8H1B,OA5HA0D,EAAMxC,UAAU,CACdyC,KAAM,CAACrF,EAAQoE,WAAY,GAC3BkB,YAAa,WACbC,OAAQ,WACRvD,MAAO,SAAewD,EAAOC,GAC3B,IAAIP,EAAO,GACXA,EAAKA,KAAOpD,KACZoD,EAAKQ,UAAYD,EAAGE,SAAS3C,IAC7BkC,EAAKU,WAAaH,EAAGE,SAASxB,KAC9Be,EAAKW,WAAaJ,EAAGE,SAAS3C,IAC9BkC,EAAKY,YAAcL,EAAGE,SAASxB,KAC/Be,EAAK3D,SAAWjB,EAAQyC,mBAAmBlB,MAAM9B,EAAS,CAAC0F,EAAGE,SAAS3C,MACvEkC,EAAKa,YAAcb,EAAK3D,SACxBpB,EAAc+E,GAShBc,KAAM,SAAcR,EAAOC,GAGzB,GAFA5F,EAAEiC,MAAMV,KAAK,aAAa,IAErBjB,EACH,OAAO,EAGT,IAAI8F,EAAYpG,EAAEiC,MACdqD,EAAQc,EAAU7E,KAAK,UAKvB8E,EAAc5F,EAAQyC,mBAAmBlB,MAAM9B,EAAS,CAAC0F,EAAGE,SAAS3C,MAsBzE,OAhBAyC,EAAGE,SAASxB,KAAOpD,KAAKC,MAAMyE,EAAGE,SAASxB,KAAOnE,EAAQoE,YAAcpE,EAAQoE,WAE3EjE,EAAY4F,cAAgBG,IAK9B/F,EAAY4F,YAAcG,GAI5B/F,EAAY0F,WAAaJ,EAAGE,SAAS3C,IACrC7C,EAAY2F,YAAcL,EAAGE,SAASxB,KAEtC7D,EAAQ6F,gBAAgBtE,MAAM9B,EAAS,CAACkG,EAAWhG,EAAckF,MAE1D,GAGTiB,KAAM,WACJvG,EAAEiC,MAAMV,KAAK,aAAa,GAC1BjB,EAAc,KACd,IAAI+E,EAAOrF,EAAEiC,MACTqD,EAAQD,EAAK9D,KAAK,UAClBiF,EAAInB,EAAKS,WAAWxB,KAEpBnC,EAAQ5B,EAAiBW,KAAKC,MAAMqF,EAAIrG,EAAQoE,YAAcpE,EAAQ+D,UAEtE9B,EAAMD,GAAS/B,EAAckF,GAAOlD,IAAMhC,EAAckF,GAAOnD,OACnE/B,EAAckF,GAAOnD,MAAQA,EAC7B/B,EAAckF,GAAOlD,IAAMA,EAEvBjC,EAAQsG,UACVtG,EAAQsG,SAASpB,EAAMjF,EAAckF,OAI3CC,EAAMtC,UAAU,CACdyD,QAAS,IACTlB,KAAM,CAACrF,EAAQoE,WAAYpE,EAAQqD,WACnCmD,SAAUxG,EAAQoE,WAClBpC,MAAO,WACMnC,EAAEiC,MACRV,KAAK,eAAe,IAE3BqF,OAAQ,SAAgBC,EAAIjB,GAE1BA,EAAG1F,QAAQyC,OAAOiD,EAAGkB,KAAKnE,QAC1BiD,EAAG1F,QAAQsE,MAAMoB,EAAGkB,KAAKtC,QAG3B+B,KAAM,WACJ,IAAIlB,EAAOrF,EAAEiC,MACTqD,EAAQD,EAAK9D,KAAK,UAClBiF,EAAInB,EAAKS,WAAWxB,KACpByC,EAAI1B,EAAK2B,aACT7E,EAAQ5B,EAAiBW,KAAKC,MAAMqF,EAAIrG,EAAQoE,YAAcpE,EAAQ+D,UACtE9B,EAAM7B,EAAiBW,KAAKC,OAAOqF,EAAIO,GAAK5G,EAAQoE,YAAcpE,EAAQ+D,UAC1EmC,EAAcjG,EAAckF,GAAO5D,SACvCtB,EAAckF,GAAOnD,MAAQA,EAC7B/B,EAAckF,GAAOlD,IAAMA,EAE3B3B,EAAQ8B,kBAAkBP,MAAM9B,EAAS,CAACmG,IAG1C5F,EAAQ6F,gBAAgBtE,MAAM9B,EAAS,CAACmF,EAAMjF,EAAckF,KAE5DD,EAAK9D,KAAK,eAAe,GAErBpB,EAAQsG,UACVtG,EAAQsG,SAASpB,EAAMjF,EAAckF,QAKjB,IAAtBnF,EAAQ4C,WACVwC,EAAMxC,UAAU,YAGQ,IAAtB5C,EAAQ8C,WACVsC,EAAMtC,UAAU,WAGXiC,GASTF,kBAAmB,SAA2B3B,GAC5C,IAAID,EAAM,EAEV,IAAK,IAAI9B,KAAKlB,EACRA,EAAckB,GAAGI,WAAa2B,GAChCD,IAIJ,OAAOA,GASTX,QAAS,SAAiBf,EAAUuF,GAClC,IACIC,EADAC,EAAKlH,EAAS4B,KAAK,sBAAsBiC,OAE7CoD,EAAO,GAEP,IAAIE,EAAQpH,EADZkH,GAAQ,gCAGJD,EAAII,OACND,EAAMxC,OAAO,gCAAkCqC,EAAII,MAAQ,WAGzDJ,EAAIK,UACNF,EAAMxC,OAAO,mCAAqCqC,EAAIK,SAAW,WAI/DnH,EAAQoH,WACVpH,EAAQoH,UAAUH,EAAOH,GAG3BhH,EAAS4B,KAAK,mBAAmB+C,OAAOwC,GACxCF,EAAO,GAIP,IAFA,IAAIM,EAAYxH,EADhBkH,GAAQ,gCAGCO,EAAIlH,EAAgBkH,EAAIjH,EAAciH,GAAKtH,EAAQ+D,UAAW,CACrE,IAAIwD,EAAM1H,EAAE,0BACZ0H,EAAIV,WAAW7G,EAAQoE,YACvBmD,EAAInG,KAAK,OAAQd,EAAQM,WAAW0G,IACpCC,EAAInG,KAAK,WAAYG,GACrB8F,EAAU5C,OAAO8C,GA6BnB,GAxBAF,EAAU3F,KAAK,OAAO8F,MAAM,WAEtBxH,EAAQyH,iBACVzH,EAAQyH,gBAAgB3F,KAAMjC,EAAEiC,MAAMV,KAAK,QAASvB,EAAEiC,MAAMV,KAAK,YAAalB,EAAcL,EAAEiC,MAAMV,KAAK,gBAI7GiG,EAAU3F,KAAK,OAAOgG,GAAG,cAAe,WAMtC,OAJI1H,EAAQyH,iBACVzH,EAAQyH,gBAAgB3F,KAAMjC,EAAEiC,MAAMV,KAAK,QAASvB,EAAEiC,MAAMV,KAAK,YAAalB,EAAcL,EAAEiC,MAAMV,KAAK,eAGpG,IAETtB,EAAS4B,KAAK,YAAY+C,OAAO4C,IACjCnH,EAAcqB,GAAYuF,GAElBvC,OAAuB,KAAduC,EAAIvC,QACnBzE,EAAS4B,KAAK,sBAAsB4C,GAAG0C,GAAIxC,SAASsC,EAAIvC,OACxDzE,EAAS4B,KAAK,sBAAsB4C,GAAG0C,GAAIxC,SAASsC,EAAIvC,QAItDuC,EAAIzF,SACN,IAAK,IAAIF,KAAK2F,EAAIzF,SAAU,CAC1B,IAAIsG,EAAQb,EAAIzF,SAASF,GACrByG,EAAItH,EAAQC,eAAeoH,EAAM3F,OACjC6F,EAAIvH,EAAQC,eAAeoH,EAAM1F,KACjCb,EAAO,GACXA,EAAKY,MAAQ4F,EACbxG,EAAKa,IAAM4F,EAEPF,EAAMzF,OACRd,EAAKc,KAAOyF,EAAMzF,MAGpBd,EAAKG,SAAWJ,EAChBC,EAAKA,KAAO,GAERuG,EAAMvG,OACRA,EAAKA,KAAOuG,EAAMvG,MAGpBd,EAAQ6B,iBAAiBN,MAAM9B,EAAS,CAACiH,EAAI5F,IAKjDd,EAAQ8B,kBAAkBP,MAAM9B,EAAS,CAACiH,IAE1ClH,EAAS4B,KAAK,sBAAsB4C,GAAG0C,GAAIc,UAAU,CACnDC,OAAQ,UACRC,KAAM,SAActB,EAAIjB,GACtB,IAAIP,EAAOO,EAAG7C,UACVuC,EAAQD,EAAK9D,KAAK,UAClB6G,EAAiBhI,EAAckF,GAAO5D,SACtC2E,EAAcpG,EAAS4B,KAAK,sBAAsBwG,MAAMpG,MAE5D7B,EAAckF,GAAO5D,SAAW2E,EAChChB,EAAKiD,SAASrG,MAEdxB,EAAQ8B,kBAAkBP,MAAM9B,EAAS,CAACkI,IAE1C3H,EAAQ8B,kBAAkBP,MAAM9B,EAAS,CAACmG,OAI1ClG,EAAQoI,aACVtI,EAAS4B,KAAK,sBAAsB4C,GAAG0C,GAAItF,KAAK,WAAW2G,KAAK,WAC9D,IAAInD,EAAOrF,EAAEiC,MACTqD,EAAQD,EAAK9D,KAAK,UACtBpB,EAAQoI,YAAYlD,EAAMjF,EAAckF,OAW9CgB,gBAAiB,SAAyBjB,EAAM9D,GAC9C,IAAIiF,EAAInB,EAAKS,WAAWxB,KAEpBnC,EAAQ5B,EAAiBW,KAAKC,MAAMqF,EAAIrG,EAAQoE,YAAcpE,EAAQ+D,UAEtE9B,EAAMD,GAASZ,EAAKa,IAAMb,EAAKY,OAC/B+E,EAAOzG,EAAQM,WAAWoB,GAAS,IAAM1B,EAAQM,WAAWqB,GAChEpC,EAAEqF,GAAMxD,KAAK,SAASqF,KAAKA,IAO7B3E,kBAAmB,SAA2Bc,GAE5C,IAIIoF,EAAKC,EACLC,EAAIC,EAAIC,EAAIC,EAAIC,EAChBzH,EANA0H,EAAW/I,EAAS4B,KAAK,sBAAsB4C,GAAGpB,GAAGxB,KAAK,WAC1DoH,EAAQ,GACRC,EAAQ,GACRC,EAAI,EAKR,IAAK7H,EAAI,EAAGA,EAAI0H,EAASlF,OAAQxC,IAC/B2H,EAAM3H,GAAK,CACT8H,KAAM9H,EACNkF,EAAGxG,EAAEgJ,EAAS1H,IAAIwE,WAAWxB,MAiBjC,IAZA2E,EAAMI,KAAK,SAAUC,EAAGC,GACtB,OAAID,EAAE9C,EAAI+C,EAAE/C,GACF,EAGN8C,EAAE9C,EAAI+C,EAAE/C,EACH,EAGF,IAGJlF,EAAI,EAAGA,EAAI2H,EAAMnF,OAAQxC,IAAK,CAIjC,IAHAqH,EAAKM,EAAM3H,GAAG8H,KACdX,EAAMzI,EAAEgJ,EAASL,IAEZQ,EAAI,EAAGA,EAAID,EAAMpF,OAAQqF,IAAK,CAGjC,IAFA,IAAIK,GAAO,EAEFC,EAAI,EAAGA,EAAIP,EAAMC,GAAGrF,OAAQ2F,IACnCb,EAAKM,EAAMC,GAAGM,GACdf,EAAM1I,EAAEgJ,EAASJ,IACjBC,EAAKJ,EAAI3C,WAAWxB,KACpByE,EAAKN,EAAI3C,WAAWxB,KAAOmE,EAAIzB,aAC/B8B,EAAKJ,EAAI5C,WAAWxB,KAGhBuE,EAFCH,EAAI5C,WAAWxB,KAAOoE,EAAI1B,cAEX8B,EAALC,IACbS,GAAO,GAKX,IAAKA,EACH,MAICN,EAAMC,KACTD,EAAMC,GAAK,IAGbV,EAAIpE,IAAI,CACNlB,IAAKgG,EAAIhJ,EAAQqD,UAAYrD,EAAQsD,qBAEvCyF,EAAMC,GAAGD,EAAMC,GAAGrF,QAAU6E,EAI9BlI,EAAQsB,WAAWC,MAAMC,KAAM,CAACoB,EAAG6F,EAAMpF,UAQ3C/B,WAAY,SAAoBsB,EAAGV,GACjC,IAAIwG,EAAIjI,KAAK6C,IAAIpB,EAAQ,GACzB1C,EAAS4B,KAAK,sBAAsB4C,GAAGpB,GAAGqG,YAAYP,EAAIhJ,EAAQqD,UAAYrD,EAAQwJ,eAAiBxJ,EAAQsD,mBAAqBtD,EAAQuD,uBAC5IzD,EAAS4B,KAAK,sBAAsB4C,GAAGpB,GAAGqG,YAAYP,EAAIhJ,EAAQqD,UAAYrD,EAAQwJ,eAAiBxJ,EAAQsD,mBAAqBtD,EAAQuD,uBAC5IzD,EAAS4B,KAAK,sBAAsB4C,GAAGpB,GAAGxB,KAAK,aAAa2G,KAAK,WAC/DxI,EAAEiC,MAAMyH,YAAY1J,EAAEiC,MAAM2H,QAAQ,aAAaF,iBAEnDzJ,EAAS4B,KAAK,YAAY6H,YAAYzJ,EAAS4B,KAAK,gBAAgB6H,gBAMtEG,cAAe,WACb,IACIC,EADU7J,EAASuE,QACKrE,EAAQ4J,UAAY5J,EAAQ6J,kBACpDC,EAAU/I,KAAKC,OAAOX,EAAeD,GAAkBJ,EAAQ+D,WACnEjE,EAAS4B,KAAK,mBAAmB2C,MAAMrE,EAAQ4J,WAC/C9J,EAAS4B,KAAK,4BAA4B2C,MAAMrE,EAAQ4J,WACxD9J,EAAS4B,KAAK,cAAc2C,MAAMsF,GAClC7J,EAAS4B,KAAK,gBAAgB2C,MAAMsF,GACpC7J,EAAS4B,KAAK,qBAAqB2C,MAAMrE,EAAQoE,WAAa0F,GAC9DhK,EAAS4B,KAAK,mBAAmB2C,MAAMrE,EAAQoE,WAAa0F,IAU9DC,eAAgB,SAAwBxI,EAAUyI,EAAkBC,GAGlE,IAFA,IAAIpB,EAAW/I,EAAS4B,KAAK,sBAAsB4C,GAAG/C,GAAUG,KAAK,WAE5DP,EAAI,EAAGA,EAAI0H,EAASlF,OAAQxC,IAAK,CACxC,IAAI8C,EAAOpE,EAAEgJ,EAAS1H,IAEtB,GAAI6I,EAAiBrE,WAAWxB,MAAQF,EAAK0B,WAAWxB,KAAM,CAC5D,IAAI+F,EAAKjG,EAAK0B,WAAWxB,KAAOnE,EAAQoE,WAAa6F,EACjDE,EAAKpJ,KAAKC,OAAOX,EAAeD,GAAkBJ,EAAQ+D,WAAa/D,EAAQoE,WAAaH,EAAK4C,aACrG5C,EAAKC,IAAI,CACPC,KAAMpD,KAAK6C,IAAI,EAAG7C,KAAKqJ,IAAIF,EAAIC,MAEjC,IAAIhF,EAAQlB,EAAK7C,KAAK,UAClBY,EAAQ5B,EAAiBW,KAAKC,MAAMiD,EAAK0B,WAAWxB,KAAOnE,EAAQoE,YAAcpE,EAAQ+D,UACzF9B,EAAMD,GAAS/B,EAAckF,GAAOlD,IAAMhC,EAAckF,GAAOnD,OACnE/B,EAAckF,GAAOnD,MAAQA,EAC7B/B,EAAckF,GAAOlD,IAAMA,EAE3B3B,EAAQ6F,gBAAgBtE,MAAM9B,EAAS,CAACkE,EAAMhE,EAAckF,KAGxDnF,EAAQsG,UACVtG,EAAQsG,SAASrC,EAAMhE,EAAckF,KAK3C7E,EAAQ8B,kBAAkBP,MAAM9B,EAAS,CAACwB,KAM5C8I,KAAM,SAAcC,GAClBxK,EAAWD,EAAEiC,MACb/B,EAAU+B,KACV9B,EAAUH,EAAE0K,OAAO,CACjBC,UAAW,cACXhH,KAAM,GACNiH,UAAW,QACXC,QAAS,QACTtG,WAAY,GAEZL,UAAW,IAEXV,UAAW,GAEXmG,eAAgB,EAEhBmB,WAAY,EAEZrH,mBAAoB,EACpBC,sBAAuB,EACvBqH,eAAgB,EAEhBhB,UAAW,IAEXC,kBAAmB,EAEnBgB,gBAAiB,EAEjBjI,WAAW,EACXE,WAAW,EAEXsE,UAAW,KACXd,SAAU,KACVrB,QAAS,KACTmD,YAAa,KACbtD,iBAAkB,KAClB2C,gBAAiB,MAChB6C,GACHlK,EAAiBE,EAAQC,eAAeP,EAAQyK,WAChDpK,EAAeC,EAAQC,eAAeP,EAAQ0K,SAC9CtK,GAAkBA,EAAiBJ,EAAQ+D,UAC3C1D,GAAgBA,EAAeL,EAAQ+D,UACvC,IAAIgD,EAAO,yWACXjH,EAAS2E,OAAOsC,GAChBjH,EAAS0E,SAASxE,EAAQwK,WAC1B1K,EAAS4B,KAAK,gBAAgBoJ,OAAO,WACnChL,EAAS4B,KAAK,mBAAmBwC,IAAI,OAA8B,EAAvBrE,EAAEiC,MAAMiJ,aACpDjL,EAAS4B,KAAK,qBAAqBwC,IAAI,QAAgC,EAAxBrE,EAAEiC,MAAMkJ,gBAMzD,IAFA,IAAIC,GAAc,EAET3D,EAAIlH,EAAgBkH,EAAIjH,EAAciH,GAAKtH,EAAQ+D,UAC1D,GAAIkH,EAAa,GAAKlK,KAAKC,MAAMiK,EAAa,QAAUlK,KAAKC,MAAMsG,EAAI,MAAO,CAC5EP,EAAO,GACPA,GAAQ,wBAA0BzG,EAAQM,WAAW0G,GAAK,SAC1D,IAAI4D,EAAQrL,EAAEkH,GACVoE,EAAKxK,OAAOI,KAAKqJ,IAAgD,KAA5CrJ,KAAKqC,MAAMkE,EAAItH,EAAQ+D,WAAa,MAAc1D,GAAgBiH,GACvFwC,EAAU/I,KAAKC,MAAMmK,EAAKnL,EAAQ+D,WACtCmH,EAAM7G,MAAMyF,EAAU9J,EAAQoE,YAC9BtE,EAAS4B,KAAK,qBAAqB+C,OAAOyG,GAC1CD,EAAa3D,EAQjB,IAAK,IAAInG,KAJTtB,EAAEuL,QAAQ3E,OAAO,WACfnG,EAAQoJ,cAAc7H,MAAM9B,KAC3BsL,QAAQ,UAEGrL,EAAQwD,KACpBlD,EAAQgC,QAAQT,MAAMC,KAAM,CAACX,EAAGnB,EAAQwD,KAAKrC,KAG/C,OAAOW,OAUXjC,EAAEyL,GAAGC,aAAe,SAAUC,GAE5B,OAAIlL,EAAQkL,GACHlL,EAAQkL,GAAQ3J,MAAMC,KAAM2J,MAAM7L,UAAUa,MAAMiL,KAAKC,UAAW,IAC5C,WAApBpM,QAAQiM,IAAyBA,GAI5C3L,EAAE+L,MAAM,UAAYJ,EAAS,0CACtB1J,MAJExB,EAAQ+J,KAAKxI,MAAMC,KAAM6J,YA1zBtC,CAg0BGE","file":"jq.schedule.min.js","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n(function ($) {\n  'use strict';\n\n  var setting = null;\n  var _scheduleData = [];\n  var _timelineData = [];\n  var currentNode = null;\n  var tableStartTime = 0;\n  var tableEndTime = 0;\n  var $element, element;\n  var methods = {\n    /**\n     *\n     * @param {string} str\n     * @returns {number}\n     */\n    calcStringTime: function calcStringTime(str) {\n      var slice = str.split(':');\n      var h = Number(slice[0]) * 60 * 60;\n      var i = Number(slice[1]) * 60;\n      return h + i;\n    },\n\n    /**\n     *\n     * @param {number} val\n     * @returns {string}\n     */\n    formatTime: function formatTime(val) {\n      var i1 = val % 3600;\n      var h = '' + Math.floor(val / 36000) + Math.floor(val / 3600 % 10);\n      var i = '' + Math.floor(i1 / 600) + Math.floor(i1 / 60 % 10);\n      return h + ':' + i;\n    },\n\n    /**\n     * get scheduleData\n     * @returns {any[]}\n     */\n    scheduleData: function scheduleData() {\n      return _scheduleData;\n    },\n\n    /**\n     * get timelineData\n     * @returns {any[]}\n     */\n    timelineData: function timelineData() {\n      var data = [];\n      var i;\n\n      for (i in _timelineData) {\n        data[i] = _timelineData[i];\n        data[i].schedule = [];\n      }\n\n      for (i in _scheduleData) {\n        var d = _scheduleData[i];\n\n        if (typeof d.timeline === 'undefined') {\n          continue;\n        }\n\n        if (typeof data[d.timeline] === 'undefined') {\n          continue;\n        }\n\n        data[d.timeline].schedule.push(d);\n      }\n\n      return data;\n    },\n\n    /**\n     * reset data\n     */\n    resetData: function resetData() {\n      _scheduleData = [];\n      $element.find('.sc_bar').remove();\n\n      for (var i in _timelineData) {\n        _timelineData[i].schedule = [];\n\n        methods._resizeRow.apply(this, [i, 0]);\n      }\n\n      return this;\n    },\n\n    /**\n     * add schedule data\n     *\n     * @param {number} timeline\n     * @param {object} data\n     * @returns {methods}\n     */\n    addSchedule: function addSchedule(timeline, data) {\n      var d = {\n        start: methods.calcStringTime(data.start),\n        end: methods.calcStringTime(data.end),\n        text: data.text,\n        timeline: timeline\n      };\n\n      if (data.data) {\n        d.data = data.data;\n      }\n\n      methods._addScheduleData.apply(this, [timeline, d]);\n\n      methods._resetBarPosition.apply(this, [timeline]);\n\n      return this;\n    },\n\n    /**\n     * add schedule data\n     *\n     * @param {number} timeline\n     * @param {object} data\n     * @returns {methods}\n     */\n    addRow: function addRow(timeline, data) {\n      methods._addRow.apply(this, [timeline, data]);\n\n      return this;\n    },\n\n    /**\n     * clear row\n     *\n     * @returns {methods}\n     */\n    resetRowData: function resetRowData() {\n      _scheduleData = [];\n      _timelineData = [];\n      $element.find('.sc_bar').remove();\n      $element.find('.timeline').remove();\n      $element.find('.sc_data').height(0);\n      return this;\n    },\n\n    /**\n     * clear row\n     *\n     * @param {object} data\n     * @returns {methods}\n     */\n    setRows: function setRows(data) {\n      methods.resetRowData.apply(this, []);\n\n      for (var timeline in data) {\n        methods.addRow.apply(this, [timeline, data[timeline]]);\n      }\n\n      return this;\n    },\n\n    /**\n     * switch draggable\n     * @param {boolean} enable\n     */\n    setDraggable: function setDraggable(enable) {\n      if (enable !== setting.draggable) {\n        setting.draggable = enable;\n\n        if (enable) {\n          $element.find('.sc_bar').draggable('enable');\n        } else {\n          $element.find('.sc_bar').draggable('disable');\n        }\n      }\n    },\n\n    /**\n     * switch resizable\n     * @param {boolean} enable\n     */\n    setResizable: function setResizable(enable) {\n      if (enable !== setting.resizable) {\n        setting.resizable = enable;\n\n        if (enable) {\n          $element.find('.sc_bar').resizable('enable');\n        } else {\n          $element.find('.sc_bar').resizable('disable');\n        }\n      }\n    },\n\n    /**\n     * 現在のタイムライン番号を取得\n     *\n     * @param top\n     * @returns {number}\n     */\n    _getTimeLineNumber: function _getTimeLineNumber(top) {\n      var num = 0;\n      var n = 0;\n      var tn = Math.ceil(top / (setting.timeLineY + setting.timeLinePaddingTop + setting.timeLinePaddingBottom));\n\n      for (var i in setting.rows) {\n        var r = setting.rows[i];\n        var tr = 0;\n\n        if (_typeof(r.schedule) === 'object') {\n          tr = r.schedule.length;\n        }\n\n        if (currentNode && currentNode.timeline) {\n          tr++;\n        }\n\n        n += Math.max(tr, 1);\n\n        if (n >= tn) {\n          break;\n        }\n\n        num++;\n      }\n\n      return num;\n    },\n\n    /**\n     * 背景データ追加\n     *\n     * @param data\n     */\n    _addScheduleBgData: function _addScheduleBgData(data) {\n      var st = Math.ceil((data.start - tableStartTime) / setting.widthTime);\n      var et = Math.floor((data.end - tableStartTime) / setting.widthTime);\n      var $bar = $('<div class=\"sc_bgBar\"><span class=\"text\"></span></div>'); // var stext = element.formatTime(data.start);\n      // var etext = element.formatTime(data.end);\n      // var snum = element._getScheduleCount(data.timeline);\n\n      $bar.css({\n        left: st * setting.widthTimeX,\n        top: 0,\n        width: (et - st) * setting.widthTimeX,\n        height: $element.find('.sc_main .timeline').eq(data.timeline).height()\n      });\n\n      if (data.text) {\n        $bar.find('.text').text(data.text);\n      }\n\n      if (data.class) {\n        $bar.addClass(data.class);\n      } // $element.find('.sc_main').append($bar);\n\n\n      $element.find('.sc_main .timeline').eq(data.timeline).append($bar);\n    },\n\n    /**\n     * スケジュール追加\n     *\n     * @param timeline\n     * @param data\n     * @returns {number}\n     */\n    _addScheduleData: function _addScheduleData(timeline, data) {\n      var st = Math.ceil((data.start - tableStartTime) / setting.widthTime);\n      var et = Math.floor((data.end - tableStartTime) / setting.widthTime);\n      var $bar = $('<div class=\"sc_bar\"><span class=\"head\"><span class=\"time\"></span></span><span class=\"text\"></span></div>');\n      var stext = methods.formatTime(data.start);\n      var etext = methods.formatTime(data.end);\n\n      var snum = methods._getScheduleCount.apply(element, [data.timeline]);\n\n      $bar.css({\n        left: st * setting.widthTimeX,\n        top: snum * setting.timeLineY + setting.timeLinePaddingTop,\n        width: (et - st) * setting.widthTimeX,\n        height: setting.timeLineY\n      });\n      $bar.find('.time').text(stext + '-' + etext);\n\n      if (data.text) {\n        $bar.find('.text').text(data.text);\n      }\n\n      if (data.class) {\n        $bar.addClass(data.class);\n      } // $element.find('.sc_main').append($bar);\n\n\n      var $row = $element.find('.sc_main .timeline').eq(timeline);\n      $row.append($bar); // データの追加\n\n      _scheduleData.push(data); // コールバックがセットされていたら呼出\n\n\n      if (setting.onAppendSchedule) {\n        setting.onAppendSchedule($bar, data);\n      } // key\n\n\n      var key = _scheduleData.length - 1;\n      $bar.data('sc_key', key);\n      $bar.bind('mouseup', function () {\n        // コールバックがセットされていたら呼出\n        if (setting.onClick) {\n          if ($(this).data('dragCheck') !== true && $(this).data('resizeCheck') !== true) {\n            var node = $(this);\n            var scKey = node.data('sc_key');\n            setting.onClick(node, _scheduleData[scKey]);\n          }\n        }\n      });\n      var $node = $element.find('.sc_bar'); // move node.\n\n      $node.draggable({\n        grid: [setting.widthTimeX, 1],\n        containment: '.sc_main',\n        helper: 'original',\n        start: function start(event, ui) {\n          var node = {};\n          node.node = this;\n          node.offsetTop = ui.position.top;\n          node.offsetLeft = ui.position.left;\n          node.currentTop = ui.position.top;\n          node.currentLeft = ui.position.left;\n          node.timeline = methods._getTimeLineNumber.apply(element, [ui.position.top]);\n          node.nowTimeline = node.timeline;\n          currentNode = node;\n        },\n\n        /**\n         *\n         * @param {Event} event\n         * @param {function} ui\n         * @returns {boolean}\n         */\n        drag: function drag(event, ui) {\n          $(this).data('dragCheck', true);\n\n          if (!currentNode) {\n            return false;\n          }\n\n          var $moveNode = $(this);\n          var scKey = $moveNode.data('sc_key'); // var originalTop = ui.originalPosition.top;\n          // var originalLeft = ui.originalPosition.left;\n          // var positionTop = ui.position.top;\n          // var positionLeft = ui.position.left;\n\n          var timelineNum = methods._getTimeLineNumber.apply(element, [ui.position.top]); // 位置の修正\n          // ui.position.top = Math.floor(ui.position.top / setting.timeLineY) * setting.timeLineY;\n          // ui.position.top = element._getScheduleCount(timelineNum) * setting.timeLineY;\n          // eslint-disable-next-line no-param-reassign\n\n\n          ui.position.left = Math.floor(ui.position.left / setting.widthTimeX) * setting.widthTimeX; // $moveNode.find(\".text\").text(timelineNum+\" \"+(element._getScheduleCount(timelineNum) + 1));\n\n          if (currentNode.nowTimeline !== timelineNum) {\n            // 高さの調節\n            // element._resizeRow(currentNode[\"nowTimeline\"],element._getScheduleCount(currentNode[\"nowTimeline\"]));\n            // element._resizeRow(timelineNum,element._getScheduleCount(timelineNum) + 1);\n            // 現在のタイムライン\n            currentNode.nowTimeline = timelineNum; // } else {\n            // ui.position.top = currentNode[\"currentTop\"];\n          }\n\n          currentNode.currentTop = ui.position.top;\n          currentNode.currentLeft = ui.position.left; // テキスト変更\n\n          methods._rewriteBarText.apply(element, [$moveNode, _scheduleData[scKey]]);\n\n          return true;\n        },\n        // 要素の移動が終った後の処理\n        stop: function stop() {\n          $(this).data('dragCheck', false);\n          currentNode = null;\n          var node = $(this);\n          var scKey = node.data('sc_key');\n          var x = node.position().left; // var w = node.width();\n\n          var start = tableStartTime + Math.floor(x / setting.widthTimeX) * setting.widthTime; // var end = tableStartTime + (Math.floor((x + w) / setting.widthTimeX) * setting.widthTime);\n\n          var end = start + (_scheduleData[scKey].end - _scheduleData[scKey].start);\n          _scheduleData[scKey].start = start;\n          _scheduleData[scKey].end = end; // コールバックがセットされていたら呼出\n\n          if (setting.onChange) {\n            setting.onChange(node, _scheduleData[scKey]);\n          }\n        }\n      });\n      $node.resizable({\n        handles: 'e',\n        grid: [setting.widthTimeX, setting.timeLineY],\n        minWidth: setting.widthTimeX,\n        start: function start() {\n          var node = $(this);\n          node.data('resizeCheck', true);\n        },\n        resize: function resize(ev, ui) {\n          // box-sizing: border-box; に対応\n          ui.element.height(ui.size.height);\n          ui.element.width(ui.size.width);\n        },\n        // 要素の移動が終った後の処理\n        stop: function stop() {\n          var node = $(this);\n          var scKey = node.data('sc_key');\n          var x = node.position().left;\n          var w = node.outerWidth();\n          var start = tableStartTime + Math.floor(x / setting.widthTimeX) * setting.widthTime;\n          var end = tableStartTime + Math.floor((x + w) / setting.widthTimeX) * setting.widthTime;\n          var timelineNum = _scheduleData[scKey].timeline;\n          _scheduleData[scKey].start = start;\n          _scheduleData[scKey].end = end; // 高さ調整\n\n          methods._resetBarPosition.apply(element, [timelineNum]); // テキスト変更\n\n\n          methods._rewriteBarText.apply(element, [node, _scheduleData[scKey]]);\n\n          node.data('resizeCheck', false); // コールバックがセットされていたら呼出\n\n          if (setting.onChange) {\n            setting.onChange(node, _scheduleData[scKey]);\n          }\n        }\n      });\n\n      if (setting.draggable === false) {\n        $node.draggable('disable');\n      }\n\n      if (setting.resizable === false) {\n        $node.resizable('disable');\n      }\n\n      return key;\n    },\n\n    /**\n     * スケジュール数の取得\n     *\n     * @param {number} n row number\n     * @returns {number}\n     */\n    _getScheduleCount: function _getScheduleCount(n) {\n      var num = 0;\n\n      for (var i in _scheduleData) {\n        if (_scheduleData[i].timeline === n) {\n          num++;\n        }\n      }\n\n      return num;\n    },\n\n    /**\n     * add rows\n     *\n     * @param timeline\n     * @param row\n     */\n    _addRow: function _addRow(timeline, row) {\n      var id = $element.find('.sc_main .timeline').length;\n      var html;\n      html = '';\n      html += '<div class=\"timeline\"></div>';\n      var $data = $(html);\n\n      if (row.title) {\n        $data.append('<span class=\"timeline-title\">' + row.title + '</span>');\n      }\n\n      if (row.subtitle) {\n        $data.append('<span class=\"timeline-subtitle\">' + row.subtitle + '</span>');\n      } // event call\n\n\n      if (setting.onInitRow) {\n        setting.onInitRow($data, row);\n      }\n\n      $element.find('.sc_data_scroll').append($data);\n      html = '';\n      html += '<div class=\"timeline\"></div>';\n      var $timeline = $(html);\n\n      for (var t = tableStartTime; t < tableEndTime; t += setting.widthTime) {\n        var $tl = $('<div class=\"tl\"></div>');\n        $tl.outerWidth(setting.widthTimeX);\n        $tl.data('time', methods.formatTime(t));\n        $tl.data('timeline', timeline);\n        $timeline.append($tl);\n      } // クリックイベント\n      // left click\n\n\n      $timeline.find('.tl').click(function () {\n        // element._moveSchedules($(this).data('timeline'), $(this), setting.bundleMoveWidth);\n        if (setting.onScheduleClick) {\n          setting.onScheduleClick(this, $(this).data('time'), $(this).data('timeline'), _timelineData[$(this).data('timeline')]);\n        }\n      }); // right click\n\n      $timeline.find('.tl').on('contextmenu', function () {\n        // element._moveSchedules($(this).data('timeline'), $(this), -1 * setting.bundleMoveWidth);\n        if (setting.onScheduleClick) {\n          setting.onScheduleClick(this, $(this).data('time'), $(this).data('timeline'), _timelineData[$(this).data('timeline')]);\n        }\n\n        return false;\n      });\n      $element.find('.sc_main').append($timeline);\n      _timelineData[timeline] = row;\n\n      if (row.class && row.class !== '') {\n        $element.find('.sc_data .timeline').eq(id).addClass(row.class);\n        $element.find('.sc_main .timeline').eq(id).addClass(row.class);\n      } // スケジュールタイムライン\n\n\n      if (row.schedule) {\n        for (var i in row.schedule) {\n          var bdata = row.schedule[i];\n          var s = methods.calcStringTime(bdata.start);\n          var e = methods.calcStringTime(bdata.end);\n          var data = {};\n          data.start = s;\n          data.end = e;\n\n          if (bdata.text) {\n            data.text = bdata.text;\n          }\n\n          data.timeline = i;\n          data.data = {};\n\n          if (bdata.data) {\n            data.data = bdata.data;\n          }\n\n          methods._addScheduleData.apply(element, [id, data]);\n        }\n      } // 高さの調整\n\n\n      methods._resetBarPosition.apply(element, [id]);\n\n      $element.find('.sc_main .timeline').eq(id).droppable({\n        accept: '.sc_bar',\n        drop: function drop(ev, ui) {\n          var node = ui.draggable;\n          var scKey = node.data('sc_key');\n          var nowTimelineNum = _scheduleData[scKey].timeline;\n          var timelineNum = $element.find('.sc_main .timeline').index(this); // タイムラインの変更\n\n          _scheduleData[scKey].timeline = timelineNum;\n          node.appendTo(this); // 高さ調整\n\n          methods._resetBarPosition.apply(element, [nowTimelineNum]);\n\n          methods._resetBarPosition.apply(element, [timelineNum]);\n        }\n      }); // コールバックがセットされていたら呼出\n\n      if (setting.onAppendRow) {\n        $element.find('.sc_main .timeline').eq(id).find('.sc_bar').each(function () {\n          var node = $(this);\n          var scKey = node.data('sc_key');\n          setting.onAppendRow(node, _scheduleData[scKey]);\n        });\n      }\n    },\n\n    /**\n     * テキストの変更\n     *\n     * @param {jQuery} node\n     * @param {Object} data\n     */\n    _rewriteBarText: function _rewriteBarText(node, data) {\n      var x = node.position().left; // var w = node.width();\n\n      var start = tableStartTime + Math.floor(x / setting.widthTimeX) * setting.widthTime; // var end = tableStartTime + (Math.floor((x + w) / setting.widthTimeX) * setting.widthTime);\n\n      var end = start + (data.end - data.start);\n      var html = methods.formatTime(start) + '-' + methods.formatTime(end);\n      $(node).find('.time').html(html);\n    },\n\n    /**\n     *\n     * @param {Number} n\n     */\n    _resetBarPosition: function _resetBarPosition(n) {\n      // 要素の並び替え\n      var $barList = $element.find('.sc_main .timeline').eq(n).find('.sc_bar');\n      var codes = [],\n          check = [];\n      var h = 0;\n      var $e1, $e2;\n      var c1, c2, s1, s2, e1, e2;\n      var i;\n\n      for (i = 0; i < $barList.length; i++) {\n        codes[i] = {\n          code: i,\n          x: $($barList[i]).position().left\n        };\n      } // ソート\n\n\n      codes.sort(function (a, b) {\n        if (a.x < b.x) {\n          return -1;\n        }\n\n        if (a.x > b.x) {\n          return 1;\n        }\n\n        return 0;\n      });\n\n      for (i = 0; i < codes.length; i++) {\n        c1 = codes[i].code;\n        $e1 = $($barList[c1]);\n\n        for (h = 0; h < check.length; h++) {\n          var next = false;\n\n          for (var j = 0; j < check[h].length; j++) {\n            c2 = check[h][j];\n            $e2 = $($barList[c2]);\n            s1 = $e1.position().left;\n            e1 = $e1.position().left + $e1.outerWidth();\n            s2 = $e2.position().left;\n            e2 = $e2.position().left + $e2.outerWidth();\n\n            if (s1 < e2 && e1 > s2) {\n              next = true;\n              continue;\n            }\n          }\n\n          if (!next) {\n            break;\n          }\n        }\n\n        if (!check[h]) {\n          check[h] = [];\n        }\n\n        $e1.css({\n          top: h * setting.timeLineY + setting.timeLinePaddingTop\n        });\n        check[h][check[h].length] = c1;\n      } // 高さの調整\n\n\n      methods._resizeRow.apply(this, [n, check.length]);\n    },\n\n    /**\n     *\n     * @param n\n     * @param height\n     */\n    _resizeRow: function _resizeRow(n, height) {\n      var h = Math.max(height, 1);\n      $element.find('.sc_data .timeline').eq(n).outerHeight(h * setting.timeLineY - setting.timeLineBorder + setting.timeLinePaddingTop + setting.timeLinePaddingBottom);\n      $element.find('.sc_main .timeline').eq(n).outerHeight(h * setting.timeLineY - setting.timeLineBorder + setting.timeLinePaddingTop + setting.timeLinePaddingBottom);\n      $element.find('.sc_main .timeline').eq(n).find('.sc_bgBar').each(function () {\n        $(this).outerHeight($(this).closest('.timeline').outerHeight());\n      });\n      $element.find('.sc_data').outerHeight($element.find('.sc_main_box').outerHeight());\n    },\n\n    /**\n     * resizeWindow\n     */\n    _resizeWindow: function _resizeWindow() {\n      var scWidth = $element.width();\n      var scMainWidth = scWidth - setting.dataWidth - setting.verticalScrollbar;\n      var cellNum = Math.floor((tableEndTime - tableStartTime) / setting.widthTime);\n      $element.find('.sc_header_cell').width(setting.dataWidth);\n      $element.find('.sc_data,.sc_data_scroll').width(setting.dataWidth);\n      $element.find('.sc_header').width(scMainWidth);\n      $element.find('.sc_main_box').width(scMainWidth);\n      $element.find('.sc_header_scroll').width(setting.widthTimeX * cellNum);\n      $element.find('.sc_main_scroll').width(setting.widthTimeX * cellNum);\n    },\n\n    /**\n     * move all cells of the right of the specified time line cell\n     *\n     * @param timeline\n     * @param baseTimeLineCell\n     * @param moveWidth\n     */\n    _moveSchedules: function _moveSchedules(timeline, baseTimeLineCell, moveWidth) {\n      var $barList = $element.find('.sc_main .timeline').eq(timeline).find('.sc_bar');\n\n      for (var i = 0; i < $barList.length; i++) {\n        var $bar = $($barList[i]);\n\n        if (baseTimeLineCell.position().left <= $bar.position().left) {\n          var v1 = $bar.position().left + setting.widthTimeX * moveWidth;\n          var v2 = Math.floor((tableEndTime - tableStartTime) / setting.widthTime) * setting.widthTimeX - $bar.outerWidth();\n          $bar.css({\n            left: Math.max(0, Math.min(v1, v2))\n          });\n          var scKey = $bar.data('sc_key');\n          var start = tableStartTime + Math.floor($bar.position().left / setting.widthTimeX) * setting.widthTime;\n          var end = start + (_scheduleData[scKey].end - _scheduleData[scKey].start);\n          _scheduleData[scKey].start = start;\n          _scheduleData[scKey].end = end;\n\n          methods._rewriteBarText.apply(element, [$bar, _scheduleData[scKey]]); // if setting\n\n\n          if (setting.onChange) {\n            setting.onChange($bar, _scheduleData[scKey]);\n          }\n        }\n      }\n\n      methods._resetBarPosition.apply(element, [timeline]);\n    },\n\n    /**\n     * initialize\n     */\n    init: function init(options) {\n      $element = $(this);\n      element = this;\n      setting = $.extend({\n        className: 'jq-schedule',\n        rows: {},\n        startTime: '07:00',\n        endTime: '19:30',\n        widthTimeX: 25,\n        // 1cell辺りの幅(px)\n        widthTime: 600,\n        // 区切り時間(秒)\n        timeLineY: 50,\n        // timeline height(px)\n        timeLineBorder: 1,\n        // timeline height border\n        timeBorder: 1,\n        // border width\n        timeLinePaddingTop: 0,\n        timeLinePaddingBottom: 0,\n        headTimeBorder: 1,\n        // time border width\n        dataWidth: 160,\n        // data width\n        verticalScrollbar: 0,\n        // vertical scrollbar width\n        bundleMoveWidth: 1,\n        // width to move all schedules to the right of the clicked time cell\n        draggable: true,\n        resizable: true,\n        // event\n        onInitRow: null,\n        onChange: null,\n        onClick: null,\n        onAppendRow: null,\n        onAppendSchedule: null,\n        onScheduleClick: null\n      }, options);\n      tableStartTime = methods.calcStringTime(setting.startTime);\n      tableEndTime = methods.calcStringTime(setting.endTime);\n      tableStartTime -= tableStartTime % setting.widthTime;\n      tableEndTime -= tableEndTime % setting.widthTime;\n      var html = '' + '<div class=\"sc_menu\">' + '\\n' + '<div class=\"sc_header_cell\"><span>&nbsp;</span></div>' + '\\n' + '<div class=\"sc_header\">' + '\\n' + '<div class=\"sc_header_scroll\"></div>' + '\\n' + '</div>' + '\\n' + '</div>' + '\\n' + '<div class=\"sc_wrapper\">' + '\\n' + '<div class=\"sc_data\">' + '\\n' + '<div class=\"sc_data_scroll\"></div>' + '\\n' + '</div>' + '\\n' + '<div class=\"sc_main_box\">' + '\\n' + '<div class=\"sc_main_scroll\">' + '\\n' + '<div class=\"sc_main\"></div>' + '\\n' + '</div>' + '\\n' + '</div>' + '\\n' + '</div>';\n      $element.append(html);\n      $element.addClass(setting.className);\n      $element.find('.sc_main_box').scroll(function () {\n        $element.find('.sc_data_scroll').css('top', $(this).scrollTop() * -1);\n        $element.find('.sc_header_scroll').css('left', $(this).scrollLeft() * -1);\n      }); // add time cell\n      // var cellNum = Math.floor((tableEndTime - tableStartTime) / setting.widthTime);\n\n      var beforeTime = -1;\n\n      for (var t = tableStartTime; t < tableEndTime; t += setting.widthTime) {\n        if (beforeTime < 0 || Math.floor(beforeTime / 3600) !== Math.floor(t / 3600)) {\n          html = '';\n          html += '<div class=\"sc_time\">' + methods.formatTime(t) + '</div>';\n          var $time = $(html);\n          var cn = Number(Math.min(Math.ceil((t + setting.widthTime) / 3600) * 3600, tableEndTime) - t);\n          var cellNum = Math.floor(cn / setting.widthTime);\n          $time.width(cellNum * setting.widthTimeX);\n          $element.find('.sc_header_scroll').append($time);\n          beforeTime = t;\n        }\n      }\n\n      $(window).resize(function () {\n        methods._resizeWindow.apply(element);\n      }).trigger('resize'); // addrow\n\n      for (var i in setting.rows) {\n        methods._addRow.apply(this, [i, setting.rows[i]]);\n      }\n\n      return this;\n    }\n  };\n  /**\n   *\n   * @param {Object|string} method\n   * @returns {jQuery|methods|*}\n   */\n  // eslint-disable-next-line no-param-reassign\n\n  $.fn.timeSchedule = function (method) {\n    // Method calling logic\n    if (methods[method]) {\n      return methods[method].apply(this, Array.prototype.slice.call(arguments, 1)); // eslint-disable-next-line no-else-return\n    } else if (_typeof(method) === 'object' || !method) {\n      return methods.init.apply(this, arguments);\n    }\n\n    $.error('Method ' + method + ' does not exist on jQuery.timeSchedule');\n    return this;\n  };\n})(jQuery);"]}